"use strict";(self.webpackChunk_revideo_docs=self.webpackChunk_revideo_docs||[]).push([[5082],{5906:(e,n,t)=>{t.d(n,{A:()=>d});var a=t(9531),o=t(53),i=t(4041),s=t(9631),r=t(9575);function l(e){let{width:n=24,height:t=24,...a}=e;return i.createElement("svg",(0,r.A)({viewBox:"0 0 24 24",width:n,height:t,"aria-hidden":!0},a),i.createElement("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z",fill:"currentColor"}))}const c={container:"container_lQCo",small:"small_As57",banner:"banner_A4QS",player:"player_tELG",link:"link_BTzN",icon:"icon_wSGd"};function p(e){let{name:n}=e;const t=`https://github.com/revideo/revideo/blob/main/packages/examples/src/scenes/${n}.tsx`;return i.createElement(s.A,{to:t,className:(0,o.A)("padding--sm",c.link)},i.createElement("span",null,"View source code"),i.createElement(l,{className:c.icon}))}function d(e){let{name:n,banner:t,small:a,link:s}=e;return i.createElement("div",{className:(0,o.A)(c.container,t&&c.banner,a&&c.small)},i.createElement("revideo-player",{class:c.player,src:`/examples/${n}.js`,auto:t}),i.createElement(p,{name:s||n}))}a.A.canUseDOM&&t.e(3980).then(t.bind(t,3980))},7652:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var a=t(9575),o=(t(4041),t(2247)),i=t(5906),s=t(154);const r="import {\n  Circle,\n  Node,\n  NodeProps,\n  Rect,\n  colorSignal,\n  initial,\n  signal,\n} from '@revideo/2d';\nimport {\n  Color,\n  ColorSignal,\n  PossibleColor,\n  SignalValue,\n  SimpleSignal,\n  all,\n  createRef,\n  createSignal,\n  easeInOutCubic,\n  tween,\n} from '@revideo/core';\n\nexport interface SwitchProps extends NodeProps {\n  initialState?: SignalValue<boolean>;\n  accent?: SignalValue<PossibleColor>;\n}\n\nexport class Switch extends Node {\n  @initial(false)\n  @signal()\n  public declare readonly initialState: SimpleSignal<boolean, this>;\n\n  @initial('#68ABDF')\n  @colorSignal()\n  public declare readonly accent: ColorSignal<this>;\n\n  private isOn: boolean;\n  private readonly indicatorPosition = createSignal(0);\n  private readonly offColor = new Color('#242424');\n  private readonly indicator = createRef<Circle>();\n  private readonly container = createRef<Rect>();\n\n  public constructor(props?: SwitchProps) {\n    super({\n      ...props,\n    });\n\n    this.isOn = this.initialState();\n    this.indicatorPosition(this.isOn ? 50 : -50);\n\n    this.add(\n      <Rect\n        ref={this.container}\n        fill={this.isOn ? this.accent() : this.offColor}\n        size={[200, 100]}\n        radius={100}\n      >\n        <Circle\n          x={() => this.indicatorPosition()}\n          ref={this.indicator}\n          size={[80, 80]}\n          fill=\"#ffffff\"\n        />\n      </Rect>,\n    );\n  }\n\n  public *toggle(duration: number) {\n    yield* all(\n      tween(duration, value => {\n        const oldColor = this.isOn ? this.accent() : this.offColor;\n        const newColor = this.isOn ? this.offColor : this.accent();\n\n        this.container().fill(\n          Color.lerp(oldColor, newColor, easeInOutCubic(value)),\n        );\n      }),\n\n      tween(duration, value => {\n        const currentPos = this.indicator().position();\n\n        this.indicatorPosition(\n          easeInOutCubic(value, currentPos.x, this.isOn ? -50 : 50),\n        );\n      }),\n    );\n    this.isOn = !this.isOn;\n  }\n}\n",l={sidebar_position:6,slug:"/custom-components"},c="Custom Components",p={unversionedId:"components/custom-components",id:"components/custom-components",title:"Custom Components",description:"_Note: These docs were adopted from the original",source:"@site/docs/components/custom-components.mdx",sourceDirName:"components",slug:"/custom-components",permalink:"/custom-components",draft:!1,editUrl:"https://github.com/havenhq/revideo/blob/main/packages/docs/docs/components/custom-components.mdx",tags:[],version:"current",lastUpdatedBy:"Justus Mattern",sidebarPosition:6,frontMatter:{sidebar_position:6,slug:"/custom-components"},sidebar:"docs",previous:{title:"Path",permalink:"/path"},next:{title:"Advanced",permalink:"/category/advanced"}},d={},u=[],m={toc:u},g="wrapper";function h(e){let{components:n,...t}=e;return(0,o.yg)(g,(0,a.A)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"custom-components"},"Custom Components"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Note: These docs were adopted from the original\n",(0,o.yg)("a",{parentName:"em",href:"https://motioncanvas.io/docs/"},"Motion Canvas")," docs")),(0,o.yg)(i.A,{name:"components",banner:!0,mdxType:"AnimationPlayer"}),(0,o.yg)("p",null,"Components are classes like ",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/Rect"},(0,o.yg)("inlineCode",{parentName:"a"},"Rect"))," and\n",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/Circle"},(0,o.yg)("inlineCode",{parentName:"a"},"Circle"))," that can abstract rendering and data\nfunctionality into reusable, modular pieces. To use a component in a scene, add\nit to the view and provide arguments to the component."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"<Switch initialState={false} />\n")),(0,o.yg)("p",null,"To define what arguments a component will take, first define an interface. All\nproperties of the interface must be wrapped in\n",(0,o.yg)("a",{parentName:"p",href:"/api/core/signals#SignalValue"},(0,o.yg)("inlineCode",{parentName:"a"},"SignalValue<>"))," as such:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"//  You can extend an existing props interface\n//  such as LayoutProps, ShapeProps or NodeProps to\n//  include their properties alongside the ones you\n//  define\n\nexport interface SwitchProps extends NodeProps {\n  initialState?: SignalValue<boolean>;\n\n  // We don't use color here because we want\n  // to be able to pass hex strings and rgb\n  // values to accent rather than a `Color`\n  accent?: SignalValue<PossibleColor>;\n}\n")),(0,o.yg)("p",null,"Next, create a class for your components. The component class must extend\n",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/Node"},(0,o.yg)("inlineCode",{parentName:"a"},"Node"))," or one of its subclasses. If you don't want to\ninherit any methods from an existing component, extend your class from ",(0,o.yg)("inlineCode",{parentName:"p"},"Node"),".\nWe advise extending from the component most similar to the component you are\nbuilding. For instance, if you were to make a component including a\n",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/Layout"},(0,o.yg)("inlineCode",{parentName:"a"},"Layout")),", you should extend\n",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/Layout"},(0,o.yg)("inlineCode",{parentName:"a"},"Layout"))," and\n",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/LayoutProps"},(0,o.yg)("inlineCode",{parentName:"a"},"LayoutProps")),"."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"export interface SwitchProps extends NodeProps {\n  // properties\n}\n\nexport class Switch extends Node {\n  // implementation\n}\n")),(0,o.yg)("p",null,"To use the properties defined in the interface, your class ",(0,o.yg)("em",{parentName:"p"},"must")," contain a\nproperty with the same name. Motion Canvas provides type decorators to\nfacilitate this like ",(0,o.yg)("inlineCode",{parentName:"p"},"@initial()")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"@signal()"),". Click ",(0,o.yg)("a",{parentName:"p",href:"/signals"},"here")," for\nmore information on signals."),(0,o.yg)("p",null,"Here is an example of how you would define such properties:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"export class Switch extends Node {\n  // @initial - optional, sets the property to an\n  // initial value if it was not provided.\n  @initial(false)\n  // @signal - is required by motion canvas\n  // for every prop that was passed in.\n  @signal()\n  public declare readonly initialState: SimpleSignal<boolean, this>;\n\n  @initial('#68ABDF')\n  // @colorSignal - some complex types provide a dedicated decorator for\n  // signals that takes care of parsing.\n  // In this case, `accent` will automatically convert strings into `Color`s\n  @colorSignal()\n  public declare readonly accent: ColorSignal<this>;\n  // ...\n}\n")),(0,o.yg)("p",null,"Notice how colors are wrapped in ",(0,o.yg)("inlineCode",{parentName:"p"},"ColorSignal<>")," while any other type (even\nuser-defined ones) are wrapped in ",(0,o.yg)("inlineCode",{parentName:"p"},"SimpleSignal<>"),". The type does not need to be\npassed to color signal as Motion Canvas knows that it must be of a\ncolor-resolvable type. In both, the class is passed at the end of the wrapper to\nregister the signal to the class. Properties must be initialised with the\n",(0,o.yg)("inlineCode",{parentName:"p"},"public"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"declare")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"readonly")," keywords."),(0,o.yg)("p",null,"Normal properties can be defined as normal. For example:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"export class Switch extends Node {\n  public constructor(props?: SwitchProps) {\n    super({\n      // If you wanted to ensure that layout was always\n      // true for this component, you could add it here\n      // as such:\n      // layout: true\n      ...props,\n    });\n    // ...\n  }\n}\n")),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"props")," parameter can also be useful outside the ",(0,o.yg)("inlineCode",{parentName:"p"},"super()")," call to access\nyour data elsewhere. For example, if you were building a component to display an\narray, you could use props to set the color of every\n",(0,o.yg)("a",{parentName:"p",href:"/api/2d/components/Rect"},"Rect")," in the array."),(0,o.yg)("p",null,"Now we can add elements to the view by using ",(0,o.yg)("inlineCode",{parentName:"p"},"this.add()"),", much like you would\nadd to a scene's view:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"export class Switch extends Node {\n  public constructor(props?: SwitchProps) {\n    // ...\n    this.add(\n      <Rect>\n        <Circle />\n      </Rect>,\n    );\n  }\n}\n")),(0,o.yg)("p",null,"Since this is a class, you can also add methods. This is especially useful when\nwanting to animate a component easily. Here is an example of a method for\ntoggling our switch:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tsx"},"export class Switch extends Node {\n  // ...\n  public *toggle(duration: number) {\n    yield* all(\n      tween(duration, value => {\n        // ...\n      }),\n      tween(duration, value => {\n        // ...\n      }),\n    );\n    this.isOn = !this.isOn;\n  }\n}\n")),(0,o.yg)("p",null,"Here is the source code for the component we have built throughout this guide:"),(0,o.yg)(s.A,{language:"tsx",mdxType:"CodeBlock"},r))}h.isMDXComponent=!0}}]);